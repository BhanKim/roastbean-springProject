<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD 3.0//EN"
						"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.rb.base.dao.ManageOrderListDao">
		
	<select id="orderListRow" resultType="Integer">
		select count(*) as ordertotlaCount from orders where ${query} like #{content} 
	</select>

	<select id="orderList" resultType="com.rb.base.model.OrderDto">
		select * from  ( select row_number() over(order by order_date asc)  as rownum,  o.order_seq, o.order_name,o.user_id, p.product_name, o.order_qty,
		o.order_price, o.order_date from orders as o, product as p 
		where  o.product_id = p.product_id 
		order by rownum desc )A, orders o
		where o.order_seq=A.order_seq and A.${query} like #{content}
		and <![CDATA[rownum <= #{rowCount}]]> and <![CDATA[rownum >= #{start}]]>;

	</select> 

</mapper>

